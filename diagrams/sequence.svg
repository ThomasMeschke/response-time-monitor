<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1057px" preserveAspectRatio="none" style="width:1155px;height:1057px;" version="1.1" viewBox="0 0 1155 1057" width="1155px" zoomAndPan="magnify"><defs><filter height="300%" id="f19l2nhy1p92t7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="929.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="43" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="132.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="48" y="858.6172"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="842.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="239" y="148.6953"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="182.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="244" y="579.4219"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249" y="621.5547"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="748.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485" y="243.0938"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="718.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="601.5" y="272.2266"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="536.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="606.5" y="454.8906"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="689.7891" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="723.5" y="301.3594"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="631.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="359.625"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="275" x="13" y="110.4297"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="302.1953" style="stroke: #000000; stroke-width: 2.0;" width="830" x="200" y="475.0234"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="191.9297" style="stroke: #000000; stroke-width: 2.0;" width="1131" x="13" y="791.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="48" x2="48" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="244" x2="244" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="490" x2="490" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="606" x2="606" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="728" x2="728" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="849" x2="849" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="962" x2="962" y1="51.2969" y2="1000.1484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1082" x2="1082" y1="51.2969" y2="1000.1484"/><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="23" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="30" y="35.9951">Main</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="23" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="30" y="1019.1436">Main</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="210" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="217" y="35.9951">Service</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="210" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="217" y="1019.1436">Service</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="430" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="437" y="35.9951">ServiceMonitor</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="430" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="437" y="1019.1436">ServiceMonitor</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="560" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="567" y="35.9951">WebServer</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="560" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="567" y="1019.1436">WebServer</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="663" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="670" y="35.9951">TemplateEngine</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="663" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="670" y="1019.1436">TemplateEngine</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="804" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="811" y="35.9951">ClockWork</text><rect fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="804" y="999.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="811" y="1019.1436">ClockWork</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="905" y="47.9951">external Service</text><ellipse cx="962.5" cy="19" fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="950.5" x2="974.5" y1="33" y2="33"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="905" y="1012.1436">external Service</text><ellipse cx="962.5" cy="1031.4453" fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="950.5" x2="974.5" y1="1045.4453" y2="1045.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1030" y="47.9951">external Client</text><ellipse cx="1082" cy="19" fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1070" x2="1094" y1="33" y2="33"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1030" y="1012.1436">external Client</text><ellipse cx="1082" cy="1031.4453" fill="#FEFECE" filter="url(#f19l2nhy1p92t7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1070" x2="1094" y1="1045.4453" y2="1045.4453"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="929.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="43" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="132.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="48" y="858.6172"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="842.4531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="239" y="148.6953"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="182.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="244" y="579.4219"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249" y="621.5547"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="748.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485" y="243.0938"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="718.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="601.5" y="272.2266"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="536.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="606.5" y="454.8906"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="689.7891" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="723.5" y="301.3594"/><rect fill="#FFFFFF" filter="url(#f19l2nhy1p92t7)" height="631.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="359.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="95" y1="82.4297" y2="82.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95" x2="95" y1="82.4297" y2="95.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="95" y1="95.4297" y2="95.4297"/><polygon fill="#A80036" points="64,91.4297,54,95.4297,64,99.4297,60,95.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="60" y="77.3638">Config</text><path d="M13,110.4297 L90,110.4297 L90,117.4297 L80,127.4297 L13,127.4297 L13,110.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="275" x="13" y="110.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="123.4966">loop</text><polygon fill="#A80036" points="227,144.6953,237,148.6953,227,152.6953,231,148.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="233" y1="148.6953" y2="148.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="60" y="143.6294">new(name, url, path, port)</text><polygon fill="#A80036" points="227,173.8281,237,177.8281,227,181.8281,231,177.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="233" y1="177.8281" y2="177.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="60" y="172.7622">@good_below_ms=...</text><polygon fill="#A80036" points="227,202.9609,237,206.9609,227,210.9609,231,206.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="233" y1="206.9609" y2="206.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="60" y="201.895">@bad_above_ms=...</text><polygon fill="#A80036" points="473,239.0938,483,243.0938,473,247.0938,477,243.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="479" y1="243.0938" y2="243.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="60" y="238.0278">new(services)</text><polygon fill="#A80036" points="589.5,268.2266,599.5,272.2266,589.5,276.2266,593.5,272.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="595.5" y1="272.2266" y2="272.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="60" y="267.1606">new(addr, port)</text><polygon fill="#A80036" points="711.5,297.3594,721.5,301.3594,711.5,305.3594,715.5,301.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="717.5" y1="301.3594" y2="301.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="60" y="296.2935">new(template-file)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="483" x2="473" y1="330.4922" y2="326.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="483" x2="473" y1="330.4922" y2="334.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="484" y1="330.4922" y2="330.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="60" y="325.4263">watch</text><polygon fill="#A80036" points="832.5,355.625,842.5,359.625,832.5,363.625,836.5,359.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495" x2="838.5" y1="359.625" y2="359.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="502" y="354.5591">new(interval)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="832.5" y1="388.7578" y2="384.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="832.5" y1="388.7578" y2="392.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495" x2="843.5" y1="388.7578" y2="388.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="502" y="383.6919">start</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="599.5" x2="589.5" y1="417.8906" y2="413.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599.5" x2="589.5" y1="417.8906" y2="421.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53" x2="600.5" y1="417.8906" y2="417.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="60" y="412.8247">listen</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="611.5" x2="658.5" y1="442.0234" y2="442.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="658.5" x2="658.5" y1="442.0234" y2="455.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="617.5" x2="658.5" y1="455.0234" y2="455.0234"/><polygon fill="#A80036" points="627.5,451.0234,617.5,455.0234,627.5,459.0234,623.5,455.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="623.5" y="436.9575">run</text><path d="M200,475.0234 L277,475.0234 L277,482.0234 L267,492.0234 L200,492.0234 L200,475.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="302.1953" style="stroke: #000000; stroke-width: 2.0;" width="830" x="200" y="475.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="215" y="488.0903">loop</text><polygon fill="#A80036" points="506,509.2891,496,513.2891,506,517.2891,502,513.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="500" x2="843.5" y1="513.2891" y2="513.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="512" y="508.2231">on_tick</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="259" y1="542.4219" y2="538.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="259" y1="542.4219" y2="546.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="484" y1="542.4219" y2="542.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="266" y="537.356">determine_response_time_async</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="249" x2="296" y1="566.5547" y2="566.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="296" x2="296" y1="566.5547" y2="579.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="296" y1="579.5547" y2="579.5547"/><polygon fill="#A80036" points="265,575.5547,255,579.5547,265,583.5547,261,579.5547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="261" y="561.4888">determine_response_time</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="254" x2="301" y1="608.6875" y2="608.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="301" x2="301" y1="608.6875" y2="621.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="260" x2="301" y1="621.6875" y2="621.6875"/><polygon fill="#A80036" points="270,617.6875,260,621.6875,270,625.6875,266,621.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="266" y="603.6216">query</text><polygon fill="#A80036" points="950.5,651.8203,960.5,655.8203,950.5,659.8203,954.5,655.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259" x2="956.5" y1="655.8203" y2="655.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="266" y="650.7544">&lt;&lt;HTTP GET request&gt;&gt;</text><polygon fill="#A80036" points="270,680.9531,260,684.9531,270,688.9531,266,684.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="264" x2="961.5" y1="684.9531" y2="684.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="276" y="679.8872">&lt;&lt;HTTP response&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="259" x2="301" y1="719.0859" y2="719.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="301" x2="301" y1="719.0859" y2="732.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="301" y1="732.0859" y2="732.0859"/><polygon fill="#A80036" points="264,728.0859,254,732.0859,264,736.0859,260,732.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="266" y="714.02">result</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="254" x2="296" y1="761.2188" y2="761.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="296" x2="296" y1="761.2188" y2="774.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="249" x2="296" y1="774.2188" y2="774.2188"/><polygon fill="#A80036" points="259,770.2188,249,774.2188,259,778.2188,255,774.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="261" y="756.1528">@last_response_time=...</text><path d="M13,791.2188 L90,791.2188 L90,798.2188 L80,808.2188 L13,808.2188 L13,791.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="191.9297" style="stroke: #000000; stroke-width: 2.0;" width="1131" x="13" y="791.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="804.2856">loop</text><polygon fill="#A80036" points="627.5,825.4844,617.5,829.4844,627.5,833.4844,623.5,829.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="621.5" x2="1081" y1="829.4844" y2="829.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="633.5" y="824.4185">&lt;&lt;HTTP GET request&gt;&gt;</text><polygon fill="#A80036" points="69,854.6172,59,858.6172,69,862.6172,65,858.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="63" x2="605.5" y1="858.6172" y2="858.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="75" y="853.5513">on_client_connected(session)</text><polygon fill="#A80036" points="711.5,883.75,721.5,887.75,711.5,891.75,715.5,887.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="58" x2="717.5" y1="887.75" y2="887.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="65" y="882.6841">render</text><polygon fill="#A80036" points="69,912.8828,59,916.8828,69,920.8828,65,916.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="63" x2="722.5" y1="916.8828" y2="916.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="75" y="911.8169">result</text><polygon fill="#A80036" points="594.5,942.0156,604.5,946.0156,594.5,950.0156,598.5,946.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="58" x2="600.5" y1="946.0156" y2="946.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="65" y="940.9497">session.write(result)</text><polygon fill="#A80036" points="1070,971.1484,1080,975.1484,1070,979.1484,1074,975.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="616.5" x2="1076" y1="975.1484" y2="975.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="623.5" y="970.0825">&lt;&lt;HTTP response&gt;&gt;</text><!--
@startuml
activate Main
Main -> Main: Config

loop
    Main -> Service: new(name, url, path, port)
    activate Service
    Main -> Service: @good_below_ms=...
    Main -> Service: @bad_above_ms=...
end

Main -> ServiceMonitor: new(services)
activate ServiceMonitor

Main -> WebServer: new(addr, port)
activate WebServer

Main -> TemplateEngine: new(template-file)
activate TemplateEngine

Main ->> ServiceMonitor: watch

ServiceMonitor -> ClockWork: new(interval)
activate ClockWork

ServiceMonitor ->> ClockWork: start

Main ->> WebServer: listen

WebServer -> WebServer: run
activate WebServer

loop
    ClockWork -> ServiceMonitor: on_tick
    ServiceMonitor ->> Service: determine_response_time_async

    Service -> Service: determine_response_time
    activate Service

    Service -> Service: query
    activate Service

    entity "external Service"

    Service -> "external Service": <<HTTP GET request>>
    Service <- - "external Service": <<HTTP response>>

    Service - -> Service: result
    deactivate Service

    Service - -> Service: @last_response_time=...
    deactivate Service    
end

loop
    entity "external Client"

    WebServer <- "external Client": <<HTTP GET request>>
    WebServer -> Main: on_client_connected(session)
    activate Main
    
    Main -> TemplateEngine: render
    TemplateEngine -> Main: result

    Main -> WebServer: session.write(result)

    WebServer -> "external Client": <<HTTP response>>
end
@enduml

PlantUML version 1.2018.03(Thu Apr 05 18:59:15 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 10.0.2+13-Ubuntu-1ubuntu0.18.04.1
Operating System: Linux
OS Version: 4.15.0-33-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>